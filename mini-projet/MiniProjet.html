<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Exercice 2</title>
		<style>
		html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-color: #eee;
}
		</style>
	</head>
	<body>
        <canvas id = "c"></canvas>
        <script>
            var c = document.getElementById("c");
var ctx = c.getContext("2d");
var width = window.innerWidth,
  height = window.innerHeight;
//need to figure out how to set the angle to the north angle 
var angle = 0,
  text = "N";

function clear() {
  width = window.innerWidth;
  height = window.innerHeight;
  c.width = width;
  c.height = height;
}
function update() {
  if(angle >= 315 || angle < 45) 
    text = "N";
  if(angle >= 45 && angle < 135) 
    text = "E";
  if(angle >= 135 && angle < 225) 
    text = "S";
  if(angle >= 225 && angle < 315) 
    text = "W";
}
function draw() {
  requestAnimationFrame(draw);
  update();
  clear();
  ctx.lineCap = "round";
  ctx.beginPath();
  ctx.lineWidth = 9;
  ctx.strokeStyle = "#111";
  ctx.arc(width / 2, height / 2, 250, 0, 2 * Math.PI);
  ctx.stroke();
  ctx.beginPath();
  ctx.lineWidth = 5;
  ctx.strokeStyle = "#444";
  angle <= 180 ? temp = false : temp = true;
  ctx.arc(width / 2, height / 2, 220, -Math.PI / 2, angle * (Math.PI / 180) - Math.PI / 2, temp);
  ctx.stroke();
  ctx.translate(width / 2, height / 2);
  ctx.rotate(angle * (Math.PI / 180));
  ctx.beginPath();
  ctx.lineWidth = 13;
  ctx.strokeStyle = "#e11";
  ctx.moveTo(0, -72);
  ctx.lineTo(0, -210);
  ctx.stroke();
  ctx.rotate(-angle * (Math.PI / 180));
  ctx.translate(-width / 2, -height / 2);
  ctx.beginPath();
  ctx.fillStyle = "#111";
  ctx.font = "100px Courier New";
  ctx.fillText(text, width / 2 - text.length / 2 * 50, height / 2 + 25);
}

clear();
draw();

window.addEventListener("deviceorientation", function(event) {
  angle = event.alpha;
});
// /*window.ondeviceorientationabsolute = function(event) {
//   angle = event.alpha;
// };*/
//         </script>